cmake_minimum_required(VERSION 2.8.5)

if(NOT CMAKE_BUILD_TYPE)
    set(CMAKE_BUILD_TYPE "Debug" CACHE STRING
        "Choose the type of build, options are: Debug Release RelWithDebInfo MinSizeRel." FORCE)
endif()

if(NOT CMAKE_INSTALL_PREFIX)
  set(CMAKE_INSTALL_PREFIX "${CMAKE_BINARY_DIR}" CACHE STRING
      "Directory to install zig to" FORCE)
endif()

project(zig C CXX)
set(CMAKE_MODULE_PATH ${CMAKE_SOURCE_DIR}/cmake ${CMAKE_MODULE_PATH})


set(ZIG_VERSION_MAJOR 0)
set(ZIG_VERSION_MINOR 3)
set(ZIG_VERSION_PATCH 0)
set(ZIG_VERSION "${ZIG_VERSION_MAJOR}.${ZIG_VERSION_MINOR}.${ZIG_VERSION_PATCH}")

find_program(GIT_EXE NAMES git)
if(GIT_EXE)
    execute_process(
        COMMAND ${GIT_EXE} -C ${CMAKE_SOURCE_DIR} name-rev HEAD --tags --name-only --no-undefined --always
        OUTPUT_VARIABLE ZIG_GIT_REV
        OUTPUT_STRIP_TRAILING_WHITESPACE)
    if(ZIG_GIT_REV MATCHES "\\^0$")
        if(NOT("${ZIG_GIT_REV}" STREQUAL "${ZIG_VERSION}^0"))
            message("WARNING: Tag does not match configured Zig version")
        endif()
    else()
        set(ZIG_VERSION "${ZIG_VERSION}+${ZIG_GIT_REV}")
    endif()
endif()
message("Configuring zig version ${ZIG_VERSION}")

set(ZIG_STATIC off CACHE BOOL "Attempt to build a static zig executable (not compatible with glibc)")

string(REGEX REPLACE "\\\\" "\\\\\\\\" ZIG_LIBC_LIB_DIR_ESCAPED "${ZIG_LIBC_LIB_DIR}")
string(REGEX REPLACE "\\\\" "\\\\\\\\" ZIG_LIBC_STATIC_LIB_DIR_ESCAPED "${ZIG_LIBC_STATIC_LIB_DIR}")
string(REGEX REPLACE "\\\\" "\\\\\\\\" ZIG_LIBC_INCLUDE_DIR_ESCAPED "${ZIG_LIBC_INCLUDE_DIR}")

option(ZIG_TEST_COVERAGE "Build Zig with test coverage instrumentation" OFF)

# To see what patches have been applied to LLD in this repository:
# git log -p -- deps/lld
option(ZIG_FORCE_EXTERNAL_LLD "If your system has the LLD patches use it instead of the embedded LLD" OFF)

find_package(llvm)
find_package(clang)

if(APPLE AND ZIG_STATIC)
    list(REMOVE_ITEM LLVM_LIBRARIES "-lz")
    list(REMOVE_ITEM LLVM_LIBRARIES "-lcurses")
    find_library(ZLIB NAMES z zlib libz)
    find_library(LIBNCURSES NAMES libncurses.a)
    list(APPEND LLVM_LIBRARIES "${LIBNCURSES}" "${ZLIB}")
endif()

set(ZIG_CPP_LIB_DIR "${CMAKE_BINARY_DIR}/zig_cpp")

if(ZIG_FORCE_EXTERNAL_LLD)
    find_package(lld)
    include_directories(${LLVM_INCLUDE_DIRS})
    include_directories(${LLD_INCLUDE_DIRS})
    include_directories(${CLANG_INCLUDE_DIRS})
else()
    # This goes first so that we find embedded LLD instead
    # of system LLD.
    include_directories("${CMAKE_SOURCE_DIR}/deps/lld/include")

    include_directories(${LLVM_INCLUDE_DIRS})
    include_directories(${CLANG_INCLUDE_DIRS})
    set(EMBEDDED_LLD_LIB_SOURCES
        "${CMAKE_SOURCE_DIR}/deps/lld/Common/Args.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/Common/ErrorHandler.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/Common/Memory.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/Common/Reproduce.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/Common/Strings.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/Common/TargetOptionsCommandFlags.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/Common/Threads.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/Common/Timer.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/Common/Version.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/lib/Core/DefinedAtom.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/lib/Core/Error.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/lib/Core/File.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/lib/Core/LinkingContext.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/lib/Core/Reader.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/lib/Core/Resolver.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/lib/Core/SymbolTable.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/lib/Core/Writer.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/lib/Driver/DarwinLdDriver.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/lib/ReaderWriter/FileArchive.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/lib/ReaderWriter/MachO/ArchHandler.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/lib/ReaderWriter/MachO/ArchHandler_arm.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/lib/ReaderWriter/MachO/ArchHandler_arm64.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/lib/ReaderWriter/MachO/ArchHandler_x86.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/lib/ReaderWriter/MachO/ArchHandler_x86_64.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/lib/ReaderWriter/MachO/CompactUnwindPass.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/lib/ReaderWriter/MachO/GOTPass.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/lib/ReaderWriter/MachO/LayoutPass.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/lib/ReaderWriter/MachO/MachOLinkingContext.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/lib/ReaderWriter/MachO/MachONormalizedFileBinaryReader.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/lib/ReaderWriter/MachO/MachONormalizedFileBinaryWriter.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/lib/ReaderWriter/MachO/MachONormalizedFileFromAtoms.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/lib/ReaderWriter/MachO/MachONormalizedFileToAtoms.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/lib/ReaderWriter/MachO/MachONormalizedFileYAML.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/lib/ReaderWriter/MachO/ObjCPass.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/lib/ReaderWriter/MachO/ShimPass.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/lib/ReaderWriter/MachO/StubsPass.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/lib/ReaderWriter/MachO/TLVPass.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/lib/ReaderWriter/MachO/WriterMachO.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/lib/ReaderWriter/YAML/ReaderWriterYAML.cpp"
    )
    set(EMBEDDED_LLD_ELF_SOURCES
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/AArch64ErrataFix.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/Arch/AArch64.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/Arch/AMDGPU.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/Arch/ARM.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/Arch/AVR.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/Arch/Hexagon.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/Arch/Mips.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/Arch/MipsArchTree.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/Arch/PPC.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/Arch/PPC64.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/Arch/SPARCV9.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/Arch/X86.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/Arch/X86_64.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/CallGraphSort.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/Driver.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/DriverUtils.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/EhFrame.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/Filesystem.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/GdbIndex.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/ICF.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/InputFiles.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/InputSection.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/LTO.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/LinkerScript.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/MapFile.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/MarkLive.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/OutputSections.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/Relocations.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/ScriptLexer.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/ScriptParser.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/SymbolTable.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/Symbols.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/SyntheticSections.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/Target.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/Thunks.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF/Writer.cpp"
    )

    set(EMBEDDED_LLD_COFF_SOURCES
        "${CMAKE_SOURCE_DIR}/deps/lld/COFF/Chunks.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/COFF/DLL.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/COFF/Driver.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/COFF/DriverUtils.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/COFF/ICF.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/COFF/InputFiles.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/COFF/LTO.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/COFF/MapFile.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/COFF/MarkLive.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/COFF/MinGW.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/COFF/PDB.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/COFF/SymbolTable.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/COFF/Symbols.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/COFF/Writer.cpp"
    )
    set(EMBEDDED_LLD_MINGW_SOURCES
        "${CMAKE_SOURCE_DIR}/deps/lld/MinGW/Driver.cpp"
    )
    set(EMBEDDED_LLD_WASM_SOURCES
        "${CMAKE_SOURCE_DIR}/deps/lld/wasm/Driver.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/wasm/InputChunks.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/wasm/InputFiles.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/wasm/LTO.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/wasm/MarkLive.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/wasm/OutputSections.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/wasm/SymbolTable.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/wasm/Symbols.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/wasm/Writer.cpp"
        "${CMAKE_SOURCE_DIR}/deps/lld/wasm/WriterUtils.cpp"
    )
    add_library(embedded_lld_lib ${EMBEDDED_LLD_LIB_SOURCES})
    add_library(embedded_lld_elf ${EMBEDDED_LLD_ELF_SOURCES})
    add_library(embedded_lld_coff ${EMBEDDED_LLD_COFF_SOURCES})
    add_library(embedded_lld_mingw ${EMBEDDED_LLD_MINGW_SOURCES})
    add_library(embedded_lld_wasm ${EMBEDDED_LLD_WASM_SOURCES})
    if(MSVC)
        set(ZIG_LLD_COMPILE_FLAGS "-std=c++11 -D_CRT_SECURE_NO_WARNINGS /w")
    else()
      set(ZIG_LLD_COMPILE_FLAGS "-std=c++11 -fno-exceptions -fno-rtti -Wno-comment")
      if(MINGW)
        set(ZIG_LLD_COMPILE_FLAGS "${ZIG_LLD_COMPILE_FLAGS} -D__STDC_FORMAT_MACROS -D__USE_MINGW_ANSI_STDIO -Wno-pedantic-ms-format")
      endif()
    endif()
    set_target_properties(embedded_lld_lib PROPERTIES
        COMPILE_FLAGS ${ZIG_LLD_COMPILE_FLAGS}
        LINK_FLAGS " "
    )
    set_target_properties(embedded_lld_elf PROPERTIES
        COMPILE_FLAGS ${ZIG_LLD_COMPILE_FLAGS}
        LINK_FLAGS " "
    )
    set_target_properties(embedded_lld_coff PROPERTIES
        COMPILE_FLAGS ${ZIG_LLD_COMPILE_FLAGS}
        LINK_FLAGS " "
    )
    set_target_properties(embedded_lld_mingw PROPERTIES
        COMPILE_FLAGS ${ZIG_LLD_COMPILE_FLAGS}
        LINK_FLAGS " "
    )
    set_target_properties(embedded_lld_wasm PROPERTIES
        COMPILE_FLAGS ${ZIG_LLD_COMPILE_FLAGS}
        LINK_FLAGS " "
    )
    target_include_directories(embedded_lld_lib PRIVATE
        "${CMAKE_SOURCE_DIR}/deps/lld/include"
        "${CMAKE_SOURCE_DIR}/deps/lld-prebuilt"
    )
    target_include_directories(embedded_lld_elf PRIVATE
        "${CMAKE_SOURCE_DIR}/deps/lld/ELF"
        "${CMAKE_SOURCE_DIR}/deps/lld/include"
        "${CMAKE_SOURCE_DIR}/deps/lld-prebuilt/ELF"
        "${CMAKE_SOURCE_DIR}/deps/lld-prebuilt"
    )
    target_include_directories(embedded_lld_coff PRIVATE
        "${CMAKE_SOURCE_DIR}/deps/lld/COFF"
        "${CMAKE_SOURCE_DIR}/deps/lld/include"
        "${CMAKE_SOURCE_DIR}/deps/lld-prebuilt/COFF"
        "${CMAKE_SOURCE_DIR}/deps/lld-prebuilt"
    )
    target_include_directories(embedded_lld_mingw PRIVATE
        "${CMAKE_SOURCE_DIR}/deps/lld/MinGW"
        "${CMAKE_SOURCE_DIR}/deps/lld/include"
        "${CMAKE_SOURCE_DIR}/deps/lld-prebuilt/MinGW"
        "${CMAKE_SOURCE_DIR}/deps/lld-prebuilt"
    )
    target_include_directories(embedded_lld_wasm PRIVATE
        "${CMAKE_SOURCE_DIR}/deps/lld/wasm"
        "${CMAKE_SOURCE_DIR}/deps/lld/include"
        "${CMAKE_SOURCE_DIR}/deps/lld-prebuilt/wasm"
        "${CMAKE_SOURCE_DIR}/deps/lld-prebuilt"
    )
    set(LLD_INCLUDE_DIRS "")
    set(LLD_LIBRARIES
        embedded_lld_elf
        embedded_lld_coff
        embedded_lld_mingw
        embedded_lld_wasm
        embedded_lld_lib
    )
    install(TARGETS embedded_lld_elf embedded_lld_coff embedded_lld_mingw embedded_lld_wasm embedded_lld_lib DESTINATION "${ZIG_CPP_LIB_DIR}")
endif()

# No patches have been applied to SoftFloat-3e
set(EMBEDDED_SOFTFLOAT_SOURCES
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/8086/f128M_isSignalingNaN.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/8086/s_commonNaNToF128M.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/8086/s_commonNaNToF16UI.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/8086/s_commonNaNToF32UI.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/8086/s_commonNaNToF64UI.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/8086/s_f128MToCommonNaN.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/8086/s_f16UIToCommonNaN.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/8086/s_f32UIToCommonNaN.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/8086/s_f64UIToCommonNaN.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/8086/s_propagateNaNF128M.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/8086/s_propagateNaNF16UI.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/8086/softfloat_raiseFlags.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f128M_add.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f128M_div.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f128M_eq.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f128M_eq_signaling.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f128M_le.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f128M_le_quiet.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f128M_lt.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f128M_lt_quiet.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f128M_mul.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f128M_mulAdd.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f128M_rem.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f128M_roundToInt.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f128M_sqrt.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f128M_sub.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f128M_to_f16.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f128M_to_f32.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f128M_to_f64.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f128M_to_i32.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f128M_to_i32_r_minMag.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f128M_to_i64.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f128M_to_i64_r_minMag.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f128M_to_ui32.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f128M_to_ui32_r_minMag.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f128M_to_ui64.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f128M_to_ui64_r_minMag.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f16_add.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f16_div.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f16_eq.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f16_lt.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f16_mul.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f16_rem.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f16_roundToInt.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f16_sqrt.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f16_sub.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f16_to_f128M.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f16_to_f64.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f32_to_f128M.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f64_to_f128M.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/f64_to_f16.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_add256M.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_addCarryM.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_addComplCarryM.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_addF128M.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_addM.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_addMagsF16.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_addMagsF32.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_addMagsF64.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_approxRecip32_1.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_approxRecipSqrt32_1.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_approxRecipSqrt_1Ks.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_approxRecip_1Ks.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_compare128M.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_compare96M.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_countLeadingZeros16.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_countLeadingZeros32.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_countLeadingZeros64.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_countLeadingZeros8.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_eq128.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_invalidF128M.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_isNaNF128M.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_le128.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_lt128.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_mul128MTo256M.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_mul64To128M.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_mulAddF128M.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_mulAddF16.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_mulAddF32.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_mulAddF64.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_negXM.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_normRoundPackMToF128M.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_normRoundPackToF16.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_normRoundPackToF32.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_normRoundPackToF64.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_normSubnormalF128SigM.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_normSubnormalF16Sig.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_normSubnormalF32Sig.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_normSubnormalF64Sig.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_remStepMBy32.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_roundMToI64.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_roundMToUI64.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_roundPackMToF128M.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_roundPackToF16.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_roundPackToF32.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_roundPackToF64.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_roundToI32.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_roundToI64.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_roundToUI32.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_roundToUI64.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_shiftLeftM.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_shiftNormSigF128M.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_shiftRightJam256M.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_shiftRightJam32.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_shiftRightJam64.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_shiftRightJamM.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_shiftRightM.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_shortShiftLeft64To96M.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_shortShiftLeftM.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_shortShiftRightExtendM.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_shortShiftRightJam64.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_shortShiftRightJamM.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_shortShiftRightM.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_sub1XM.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_sub256M.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_subM.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_subMagsF16.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_subMagsF32.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_subMagsF64.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/s_tryPropagateNaNF128M.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/softfloat_state.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/ui32_to_f128M.c"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/ui64_to_f128M.c"
)
add_library(embedded_softfloat ${EMBEDDED_SOFTFLOAT_SOURCES})
if(MSVC)
    set_target_properties(embedded_softfloat PROPERTIES
        COMPILE_FLAGS "-std=c99 /w"
    )
else()
    set_target_properties(embedded_softfloat PROPERTIES
        COMPILE_FLAGS "-std=c99 -O3"
    )
endif()
target_include_directories(embedded_softfloat PUBLIC
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e-prebuilt"
    "${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/8086"
)
include_directories("${CMAKE_SOURCE_DIR}/deps/SoftFloat-3e/source/include")
set(SOFTFLOAT_LIBRARIES embedded_softfloat)

find_package(Threads)

set(ZIG_SOURCES
    "${CMAKE_SOURCE_DIR}/src/analyze.cpp"
    "${CMAKE_SOURCE_DIR}/src/ast_render.cpp"
    "${CMAKE_SOURCE_DIR}/src/bigfloat.cpp"
    "${CMAKE_SOURCE_DIR}/src/bigint.cpp"
    "${CMAKE_SOURCE_DIR}/src/buffer.cpp"
    "${CMAKE_SOURCE_DIR}/src/c_tokenizer.cpp"
    "${CMAKE_SOURCE_DIR}/src/cache_hash.cpp"
    "${CMAKE_SOURCE_DIR}/src/codegen.cpp"
    "${CMAKE_SOURCE_DIR}/src/compiler.cpp"
    "${CMAKE_SOURCE_DIR}/src/errmsg.cpp"
    "${CMAKE_SOURCE_DIR}/src/error.cpp"
    "${CMAKE_SOURCE_DIR}/src/ir.cpp"
    "${CMAKE_SOURCE_DIR}/src/ir_print.cpp"
    "${CMAKE_SOURCE_DIR}/src/libc_installation.cpp"
    "${CMAKE_SOURCE_DIR}/src/link.cpp"
    "${CMAKE_SOURCE_DIR}/src/main.cpp"
    "${CMAKE_SOURCE_DIR}/src/os.cpp"
    "${CMAKE_SOURCE_DIR}/src/parser.cpp"
    "${CMAKE_SOURCE_DIR}/src/range_set.cpp"
    "${CMAKE_SOURCE_DIR}/src/target.cpp"
    "${CMAKE_SOURCE_DIR}/src/tokenizer.cpp"
    "${CMAKE_SOURCE_DIR}/src/util.cpp"
    "${CMAKE_SOURCE_DIR}/src/translate_c.cpp"
)
set(BLAKE_SOURCES
    "${CMAKE_SOURCE_DIR}/src/blake2b.c"
)
set(ZIG_CPP_SOURCES
    "${CMAKE_SOURCE_DIR}/src/zig_llvm.cpp"
    "${CMAKE_SOURCE_DIR}/src/zig_clang.cpp"
    "${CMAKE_SOURCE_DIR}/src/zig_clang_driver.cpp"
    "${CMAKE_SOURCE_DIR}/src/zig_clang_cc1_main.cpp"
    "${CMAKE_SOURCE_DIR}/src/zig_clang_cc1as_main.cpp"
    "${CMAKE_SOURCE_DIR}/src/windows_sdk.cpp"
)

set(ZIG_STD_FILES
    "array_list.zig"
    "atomic.zig"
    "atomic/int.zig"
    "atomic/queue.zig"
    "atomic/stack.zig"
    "base64.zig"
    "buf_map.zig"
    "buf_set.zig"
    "buffer.zig"
    "build.zig"
    "build/fmt.zig"
    "c.zig"
    "c/darwin.zig"
    "c/freebsd.zig"
    "c/linux.zig"
    "c/netbsd.zig"
    "c/windows.zig"
    "coff.zig"
    "crypto.zig"
    "crypto/blake2.zig"
    "crypto/chacha20.zig"
    "crypto/hmac.zig"
    "crypto/md5.zig"
    "crypto/poly1305.zig"
    "crypto/sha1.zig"
    "crypto/sha2.zig"
    "crypto/sha3.zig"
    "crypto/x25519.zig"
    "cstr.zig"
    "debug.zig"
    "debug/failing_allocator.zig"
    "dwarf.zig"
    "dynamic_library.zig"
    "elf.zig"
    "empty.zig"
    "event.zig"
    "event/channel.zig"
    "event/fs.zig"
    "event/future.zig"
    "event/group.zig"
    "event/io.zig"
    "event/lock.zig"
    "event/locked.zig"
    "event/loop.zig"
    "event/net.zig"
    "event/rwlock.zig"
    "event/rwlocked.zig"
    "fmt.zig"
    "fmt/errol.zig"
    "fmt/errol/enum3.zig"
    "fmt/errol/lookup.zig"
    "fmt/parse_float.zig"
    "hash.zig"
    "hash/adler.zig"
    "hash/crc.zig"
    "hash/fnv.zig"
    "hash/siphash.zig"
    "hash_map.zig"
    "heap.zig"
    "io.zig"
    "io/seekable_stream.zig"
    "json.zig"
    "lazy_init.zig"
    "linked_list.zig"
    "macho.zig"
    "math.zig"
    "math/acos.zig"
    "math/acosh.zig"
    "math/asin.zig"
    "math/asinh.zig"
    "math/atan.zig"
    "math/atan2.zig"
    "math/atanh.zig"
    "math/big.zig"
    "math/big/int.zig"
    "math/cbrt.zig"
    "math/ceil.zig"
    "math/complex.zig"
    "math/complex/abs.zig"
    "math/complex/acos.zig"
    "math/complex/acosh.zig"
    "math/complex/arg.zig"
    "math/complex/asin.zig"
    "math/complex/asinh.zig"
    "math/complex/atan.zig"
    "math/complex/atanh.zig"
    "math/complex/conj.zig"
    "math/complex/cos.zig"
    "math/complex/cosh.zig"
    "math/complex/exp.zig"
    "math/complex/ldexp.zig"
    "math/complex/log.zig"
    "math/complex/pow.zig"
    "math/complex/proj.zig"
    "math/complex/sin.zig"
    "math/complex/sinh.zig"
    "math/complex/sqrt.zig"
    "math/complex/tan.zig"
    "math/complex/tanh.zig"
    "math/copysign.zig"
    "math/cos.zig"
    "math/cosh.zig"
    "math/exp.zig"
    "math/exp2.zig"
    "math/expm1.zig"
    "math/expo2.zig"
    "math/fabs.zig"
    "math/floor.zig"
    "math/fma.zig"
    "math/frexp.zig"
    "math/hypot.zig"
    "math/ilogb.zig"
    "math/inf.zig"
    "math/isfinite.zig"
    "math/isinf.zig"
    "math/isnan.zig"
    "math/isnormal.zig"
    "math/ln.zig"
    "math/log.zig"
    "math/log10.zig"
    "math/log1p.zig"
    "math/log2.zig"
    "math/modf.zig"
    "math/nan.zig"
    "math/pow.zig"
    "math/powi.zig"
    "math/round.zig"
    "math/scalbn.zig"
    "math/signbit.zig"
    "math/sin.zig"
    "math/sinh.zig"
    "math/sqrt.zig"
    "math/tan.zig"
    "math/tanh.zig"
    "math/trunc.zig"
    "mem.zig"
    "meta.zig"
    "meta/trait.zig"
    "mutex.zig"
    "net.zig"
    "os.zig"
    "os/child_process.zig"
    "os/darwin.zig"
    "os/darwin/errno.zig"
    "os/epoch.zig"
    "os/file.zig"
    "os/freebsd.zig"
    "os/freebsd/errno.zig"
    "os/get_app_data_dir.zig"
    "os/get_user_id.zig"
    "os/linux.zig"
    "os/linux/arm64.zig"
    "os/linux/errno.zig"
    "os/linux/vdso.zig"
    "os/linux/x86_64.zig"
    "os/netbsd.zig"
    "os/netbsd/errno.zig"
    "os/path.zig"
    "os/time.zig"
    "os/uefi.zig"
    "os/windows.zig"
    "os/windows/advapi32.zig"
    "os/windows/error.zig"
    "os/windows/kernel32.zig"
    "os/windows/ntdll.zig"
    "os/windows/ole32.zig"
    "os/windows/shell32.zig"
    "os/windows/util.zig"
    "os/zen.zig"
    "pdb.zig"
    "priority_queue.zig"
    "rand.zig"
    "rand/ziggurat.zig"
    "segmented_list.zig"
    "sort.zig"
    "special/bootstrap.zig"
    "special/bootstrap_lib.zig"
    "special/bootstrap_windows_tls.zig"
    "special/build_runner.zig"
    "special/builtin.zig"
    "special/compiler_rt.zig"
    "special/compiler_rt/addXf3.zig"
    "special/compiler_rt/aulldiv.zig"
    "special/compiler_rt/aullrem.zig"
    "special/compiler_rt/comparetf2.zig"
    "special/compiler_rt/divti3.zig"
    "special/compiler_rt/extendXfYf2.zig"
    "special/compiler_rt/fixdfdi.zig"
    "special/compiler_rt/fixdfsi.zig"
    "special/compiler_rt/fixdfti.zig"
    "special/compiler_rt/fixint.zig"
    "special/compiler_rt/fixsfdi.zig"
    "special/compiler_rt/fixsfsi.zig"
    "special/compiler_rt/fixsfti.zig"
    "special/compiler_rt/fixtfdi.zig"
    "special/compiler_rt/fixtfsi.zig"
    "special/compiler_rt/fixtfti.zig"
    "special/compiler_rt/fixuint.zig"
    "special/compiler_rt/fixunsdfdi.zig"
    "special/compiler_rt/fixunsdfsi.zig"
    "special/compiler_rt/fixunsdfti.zig"
    "special/compiler_rt/fixunssfdi.zig"
    "special/compiler_rt/fixunssfsi.zig"
    "special/compiler_rt/fixunssfti.zig"
    "special/compiler_rt/fixunstfdi.zig"
    "special/compiler_rt/fixunstfsi.zig"
    "special/compiler_rt/fixunstfti.zig"
    "special/compiler_rt/floattidf.zig"
    "special/compiler_rt/floattisf.zig"
    "special/compiler_rt/floattitf.zig"
    "special/compiler_rt/floatunditf.zig"
    "special/compiler_rt/floatunsitf.zig"
    "special/compiler_rt/floatuntidf.zig"
    "special/compiler_rt/floatuntisf.zig"
    "special/compiler_rt/floatuntitf.zig"
    "special/compiler_rt/muloti4.zig"
    "special/compiler_rt/multi3.zig"
    "special/compiler_rt/truncXfYf2.zig"
    "special/compiler_rt/udivmod.zig"
    "special/compiler_rt/udivmoddi4.zig"
    "special/compiler_rt/udivmodti4.zig"
    "special/compiler_rt/udivti3.zig"
    "special/compiler_rt/umodti3.zig"
    "special/fmt_runner.zig"
    "special/init-exe/build.zig"
    "special/init-exe/src/main.zig"
    "special/init-lib/build.zig"
    "special/init-lib/src/main.zig"
    "special/panic.zig"
    "special/test_runner.zig"
    "spinlock.zig"
    "statically_initialized_mutex.zig"
    "std.zig"
    "testing.zig"
    "unicode.zig"
    "zig.zig"
    "zig/ast.zig"
    "zig/parse.zig"
    "zig/parse_string_literal.zig"
    "zig/render.zig"
    "zig/tokenizer.zig"
)

set(ZIG_C_HEADER_FILES
    "__clang_cuda_builtin_vars.h"
    "__clang_cuda_cmath.h"
    "__clang_cuda_complex_builtins.h"
    "__clang_cuda_device_functions.h"
    "__clang_cuda_intrinsics.h"
    "__clang_cuda_libdevice_declares.h"
    "__clang_cuda_math_forward_declares.h"
    "__clang_cuda_runtime_wrapper.h"
    "__stddef_max_align_t.h"
    "__wmmintrin_aes.h"
    "__wmmintrin_pclmul.h"
    "adxintrin.h"
    "altivec.h"
    "ammintrin.h"
    "arm64intr.h"
    "arm_acle.h"
    "arm_fp16.h"
    "arm_neon.h"
    "armintr.h"
    "avx2intrin.h"
    "avx512bitalgintrin.h"
    "avx512bwintrin.h"
    "avx512cdintrin.h"
    "avx512dqintrin.h"
    "avx512erintrin.h"
    "avx512fintrin.h"
    "avx512ifmaintrin.h"
    "avx512ifmavlintrin.h"
    "avx512pfintrin.h"
    "avx512vbmi2intrin.h"
    "avx512vbmiintrin.h"
    "avx512vbmivlintrin.h"
    "avx512vlbitalgintrin.h"
    "avx512vlbwintrin.h"
    "avx512vlcdintrin.h"
    "avx512vldqintrin.h"
    "avx512vlintrin.h"
    "avx512vlvbmi2intrin.h"
    "avx512vlvnniintrin.h"
    "avx512vnniintrin.h"
    "avx512vpopcntdqintrin.h"
    "avx512vpopcntdqvlintrin.h"
    "avxintrin.h"
    "bmi2intrin.h"
    "bmiintrin.h"
    "cetintrin.h"
    "cldemoteintrin.h"
    "clflushoptintrin.h"
    "clwbintrin.h"
    "clzerointrin.h"
    "cpuid.h"
    "cuda_wrappers/algorithm"
    "cuda_wrappers/complex"
    "cuda_wrappers/new"
    "emmintrin.h"
    "f16cintrin.h"
    "float.h"
    "fma4intrin.h"
    "fmaintrin.h"
    "fxsrintrin.h"
    "gfniintrin.h"
    "htmintrin.h"
    "htmxlintrin.h"
    "ia32intrin.h"
    "immintrin.h"
    "intrin.h"
    "inttypes.h"
    "invpcidintrin.h"
    "iso646.h"
    "limits.h"
    "lwpintrin.h"
    "lzcntintrin.h"
    "mm3dnow.h"
    "mm_malloc.h"
    "mmintrin.h"
    "module.modulemap"
    "movdirintrin.h"
    "msa.h"
    "mwaitxintrin.h"
    "nmmintrin.h"
    "opencl-c.h"
    "pconfigintrin.h"
    "pkuintrin.h"
    "pmmintrin.h"
    "popcntintrin.h"
    "prfchwintrin.h"
    "ptwriteintrin.h"
    "rdseedintrin.h"
    "rtmintrin.h"
    "s390intrin.h"
    "sgxintrin.h"
    "shaintrin.h"
    "smmintrin.h"
    "stdalign.h"
    "stdarg.h"
    "stdatomic.h"
    "stdbool.h"
    "stddef.h"
    "stdint.h"
    "stdnoreturn.h"
    "tbmintrin.h"
    "tgmath.h"
    "tmmintrin.h"
    "unwind.h"
    "vadefs.h"
    "vaesintrin.h"
    "varargs.h"
    "vecintrin.h"
    "vpclmulqdqintrin.h"
    "waitpkgintrin.h"
    "wbnoinvdintrin.h"
    "wmmintrin.h"
    "x86intrin.h"
    "xmmintrin.h"
    "xopintrin.h"
    "xsavecintrin.h"
    "xsaveintrin.h"
    "xsaveoptintrin.h"
    "xsavesintrin.h"
    "xtestintrin.h"
)

set(ZIG_LIBC_FILES
    "glibc-include/a.out.h"
    "glibc-include/aio.h"
    "glibc-include/aliases.h"
    "glibc-include/alloca.h"
    "glibc-include/ar.h"
    "glibc-include/argp.h"
    "glibc-include/argz.h"
    "glibc-include/arpa/ftp.h"
    "glibc-include/arpa/inet.h"
    "glibc-include/arpa/nameser.h"
    "glibc-include/arpa/nameser_compat.h"
    "glibc-include/arpa/telnet.h"
    "glibc-include/arpa/tftp.h"
    "glibc-include/assert.h"
    "glibc-include/bits/a.out.h"
    "glibc-include/bits/byteswap.h"
    "glibc-include/bits/cmathcalls.h"
    "glibc-include/bits/confname.h"
    "glibc-include/bits/cpu-set.h"
    "glibc-include/bits/dirent.h"
    "glibc-include/bits/dlfcn.h"
    "glibc-include/bits/elfclass.h"
    "glibc-include/bits/endian.h"
    "glibc-include/bits/environments.h"
    "glibc-include/bits/epoll.h"
    "glibc-include/bits/errno.h"
    "glibc-include/bits/error.h"
    "glibc-include/bits/eventfd.h"
    "glibc-include/bits/fcntl-linux.h"
    "glibc-include/bits/fcntl.h"
    "glibc-include/bits/fcntl2.h"
    "glibc-include/bits/fenv.h"
    "glibc-include/bits/fenvinline.h"
    "glibc-include/bits/floatn-common.h"
    "glibc-include/bits/floatn.h"
    "glibc-include/bits/flt-eval-method.h"
    "glibc-include/bits/fp-fast.h"
    "glibc-include/bits/fp-logb.h"
    "glibc-include/bits/getopt_core.h"
    "glibc-include/bits/getopt_ext.h"
    "glibc-include/bits/getopt_posix.h"
    "glibc-include/bits/hwcap.h"
    "glibc-include/bits/in.h"
    "glibc-include/bits/indirect-return.h"
    "glibc-include/bits/initspin.h"
    "glibc-include/bits/inotify.h"
    "glibc-include/bits/ioctl-types.h"
    "glibc-include/bits/ioctls.h"
    "glibc-include/bits/ipc.h"
    "glibc-include/bits/ipctypes.h"
    "glibc-include/bits/iscanonical.h"
    "glibc-include/bits/libc-header-start.h"
    "glibc-include/bits/libm-simd-decl-stubs.h"
    "glibc-include/bits/link.h"
    "glibc-include/bits/local_lim.h"
    "glibc-include/bits/locale.h"
    "glibc-include/bits/long-double.h"
    "glibc-include/bits/math-finite.h"
    "glibc-include/bits/math-vector.h"
    "glibc-include/bits/mathcalls-helper-functions.h"
    "glibc-include/bits/mathcalls-narrow.h"
    "glibc-include/bits/mathcalls.h"
    "glibc-include/bits/mathdef.h"
    "glibc-include/bits/mathinline.h"
    "glibc-include/bits/mman-linux.h"
    "glibc-include/bits/mman-map-flags-generic.h"
    "glibc-include/bits/mman-shared.h"
    "glibc-include/bits/mman.h"
    "glibc-include/bits/monetary-ldbl.h"
    "glibc-include/bits/mqueue.h"
    "glibc-include/bits/mqueue2.h"
    "glibc-include/bits/msq-pad.h"
    "glibc-include/bits/msq.h"
    "glibc-include/bits/netdb.h"
    "glibc-include/bits/param.h"
    "glibc-include/bits/poll.h"
    "glibc-include/bits/poll2.h"
    "glibc-include/bits/posix1_lim.h"
    "glibc-include/bits/posix2_lim.h"
    "glibc-include/bits/posix_opt.h"
    "glibc-include/bits/printf-ldbl.h"
    "glibc-include/bits/procfs-extra.h"
    "glibc-include/bits/procfs-id.h"
    "glibc-include/bits/procfs-prregset.h"
    "glibc-include/bits/procfs.h"
    "glibc-include/bits/pthreadtypes-arch.h"
    "glibc-include/bits/pthreadtypes.h"
    "glibc-include/bits/ptrace-shared.h"
    "glibc-include/bits/resource.h"
    "glibc-include/bits/sched.h"
    "glibc-include/bits/select.h"
    "glibc-include/bits/select2.h"
    "glibc-include/bits/sem-pad.h"
    "glibc-include/bits/sem.h"
    "glibc-include/bits/semaphore.h"
    "glibc-include/bits/setjmp.h"
    "glibc-include/bits/setjmp2.h"
    "glibc-include/bits/shm-pad.h"
    "glibc-include/bits/shm.h"
    "glibc-include/bits/shmlba.h"
    "glibc-include/bits/sigaction.h"
    "glibc-include/bits/sigcontext.h"
    "glibc-include/bits/sigevent-consts.h"
    "glibc-include/bits/siginfo-arch.h"
    "glibc-include/bits/siginfo-consts-arch.h"
    "glibc-include/bits/siginfo-consts.h"
    "glibc-include/bits/signalfd.h"
    "glibc-include/bits/signum-generic.h"
    "glibc-include/bits/signum.h"
    "glibc-include/bits/sigstack.h"
    "glibc-include/bits/sigthread.h"
    "glibc-include/bits/sockaddr.h"
    "glibc-include/bits/socket.h"
    "glibc-include/bits/socket2.h"
    "glibc-include/bits/socket_type.h"
    "glibc-include/bits/ss_flags.h"
    "glibc-include/bits/stab.def"
    "glibc-include/bits/stat.h"
    "glibc-include/bits/statfs.h"
    "glibc-include/bits/statvfs.h"
    "glibc-include/bits/statx.h"
    "glibc-include/bits/stdint-intn.h"
    "glibc-include/bits/stdint-uintn.h"
    "glibc-include/bits/stdio-ldbl.h"
    "glibc-include/bits/stdio.h"
    "glibc-include/bits/stdio2.h"
    "glibc-include/bits/stdio_lim.h"
    "glibc-include/bits/stdlib-bsearch.h"
    "glibc-include/bits/stdlib-float.h"
    "glibc-include/bits/stdlib-ldbl.h"
    "glibc-include/bits/stdlib.h"
    "glibc-include/bits/string_fortified.h"
    "glibc-include/bits/strings_fortified.h"
    "glibc-include/bits/stropts.h"
    "glibc-include/bits/sys_errlist.h"
    "glibc-include/bits/syscall.h"
    "glibc-include/bits/sysctl.h"
    "glibc-include/bits/syslog-ldbl.h"
    "glibc-include/bits/syslog-path.h"
    "glibc-include/bits/syslog.h"
    "glibc-include/bits/sysmacros.h"
    "glibc-include/bits/termios-baud.h"
    "glibc-include/bits/termios-c_cc.h"
    "glibc-include/bits/termios-c_cflag.h"
    "glibc-include/bits/termios-c_iflag.h"
    "glibc-include/bits/termios-c_lflag.h"
    "glibc-include/bits/termios-c_oflag.h"
    "glibc-include/bits/termios-misc.h"
    "glibc-include/bits/termios-struct.h"
    "glibc-include/bits/termios-tcflow.h"
    "glibc-include/bits/termios.h"
    "glibc-include/bits/thread-shared-types.h"
    "glibc-include/bits/time.h"
    "glibc-include/bits/time64.h"
    "glibc-include/bits/timerfd.h"
    "glibc-include/bits/timesize.h"
    "glibc-include/bits/timex.h"
    "glibc-include/bits/types.h"
    "glibc-include/bits/types/FILE.h"
    "glibc-include/bits/types/__FILE.h"
    "glibc-include/bits/types/__fpos64_t.h"
    "glibc-include/bits/types/__fpos_t.h"
    "glibc-include/bits/types/__locale_t.h"
    "glibc-include/bits/types/__mbstate_t.h"
    "glibc-include/bits/types/__sigset_t.h"
    "glibc-include/bits/types/__sigval_t.h"
    "glibc-include/bits/types/clock_t.h"
    "glibc-include/bits/types/clockid_t.h"
    "glibc-include/bits/types/cookie_io_functions_t.h"
    "glibc-include/bits/types/error_t.h"
    "glibc-include/bits/types/locale_t.h"
    "glibc-include/bits/types/mbstate_t.h"
    "glibc-include/bits/types/res_state.h"
    "glibc-include/bits/types/sig_atomic_t.h"
    "glibc-include/bits/types/sigevent_t.h"
    "glibc-include/bits/types/siginfo_t.h"
    "glibc-include/bits/types/sigset_t.h"
    "glibc-include/bits/types/sigval_t.h"
    "glibc-include/bits/types/stack_t.h"
    "glibc-include/bits/types/struct_FILE.h"
    "glibc-include/bits/types/struct_iovec.h"
    "glibc-include/bits/types/struct_itimerspec.h"
    "glibc-include/bits/types/struct_osockaddr.h"
    "glibc-include/bits/types/struct_rusage.h"
    "glibc-include/bits/types/struct_sched_param.h"
    "glibc-include/bits/types/struct_sigstack.h"
    "glibc-include/bits/types/struct_timespec.h"
    "glibc-include/bits/types/struct_timeval.h"
    "glibc-include/bits/types/struct_tm.h"
    "glibc-include/bits/types/time_t.h"
    "glibc-include/bits/types/timer_t.h"
    "glibc-include/bits/types/wint_t.h"
    "glibc-include/bits/typesizes.h"
    "glibc-include/bits/uintn-identity.h"
    "glibc-include/bits/uio-ext.h"
    "glibc-include/bits/uio_lim.h"
    "glibc-include/bits/unistd.h"
    "glibc-include/bits/utmp.h"
    "glibc-include/bits/utmpx.h"
    "glibc-include/bits/utsname.h"
    "glibc-include/bits/waitflags.h"
    "glibc-include/bits/waitstatus.h"
    "glibc-include/bits/wchar-ldbl.h"
    "glibc-include/bits/wchar.h"
    "glibc-include/bits/wchar2.h"
    "glibc-include/bits/wctype-wchar.h"
    "glibc-include/bits/wordsize.h"
    "glibc-include/bits/xopen_lim.h"
    "glibc-include/bits/xtitypes.h"
    "glibc-include/byteswap.h"
    "glibc-include/complex.h"
    "glibc-include/cpio.h"
    "glibc-include/crypt.h"
    "glibc-include/ctype.h"
    "glibc-include/dirent.h"
    "glibc-include/dlfcn.h"
    "glibc-include/elf.h"
    "glibc-include/endian.h"
    "glibc-include/envz.h"
    "glibc-include/err.h"
    "glibc-include/errno.h"
    "glibc-include/error.h"
    "glibc-include/execinfo.h"
    "glibc-include/fcntl.h"
    "glibc-include/features.h"
    "glibc-include/fenv.h"
    "glibc-include/fmtmsg.h"
    "glibc-include/fnmatch.h"
    "glibc-include/fpu_control.h"
    "glibc-include/fstab.h"
    "glibc-include/fts.h"
    "glibc-include/ftw.h"
    "glibc-include/gconv.h"
    "glibc-include/getopt.h"
    "glibc-include/glob.h"
    "glibc-include/gnu-versions.h"
    "glibc-include/gnu/lib-names-64.h"
    "glibc-include/gnu/lib-names.h"
    "glibc-include/gnu/libc-version.h"
    "glibc-include/gnu/stubs-64.h"
    "glibc-include/gnu/stubs.h"
    "glibc-include/grp.h"
    "glibc-include/gshadow.h"
    "glibc-include/iconv.h"
    "glibc-include/ieee754.h"
    "glibc-include/ifaddrs.h"
    "glibc-include/inttypes.h"
    "glibc-include/langinfo.h"
    "glibc-include/lastlog.h"
    "glibc-include/libgen.h"
    "glibc-include/libintl.h"
    "glibc-include/limits.h"
    "glibc-include/link.h"
    "glibc-include/locale.h"
    "glibc-include/malloc.h"
    "glibc-include/math.h"
    "glibc-include/mcheck.h"
    "glibc-include/memory.h"
    "glibc-include/mntent.h"
    "glibc-include/monetary.h"
    "glibc-include/mqueue.h"
    "glibc-include/net/ethernet.h"
    "glibc-include/net/if.h"
    "glibc-include/net/if_arp.h"
    "glibc-include/net/if_packet.h"
    "glibc-include/net/if_ppp.h"
    "glibc-include/net/if_shaper.h"
    "glibc-include/net/if_slip.h"
    "glibc-include/net/ppp-comp.h"
    "glibc-include/net/ppp_defs.h"
    "glibc-include/net/route.h"
    "glibc-include/netash/ash.h"
    "glibc-include/netatalk/at.h"
    "glibc-include/netax25/ax25.h"
    "glibc-include/netdb.h"
    "glibc-include/neteconet/ec.h"
    "glibc-include/netinet/ether.h"
    "glibc-include/netinet/icmp6.h"
    "glibc-include/netinet/if_ether.h"
    "glibc-include/netinet/if_fddi.h"
    "glibc-include/netinet/if_tr.h"
    "glibc-include/netinet/igmp.h"
    "glibc-include/netinet/in.h"
    "glibc-include/netinet/in_systm.h"
    "glibc-include/netinet/ip.h"
    "glibc-include/netinet/ip6.h"
    "glibc-include/netinet/ip_icmp.h"
    "glibc-include/netinet/tcp.h"
    "glibc-include/netinet/udp.h"
    "glibc-include/netipx/ipx.h"
    "glibc-include/netiucv/iucv.h"
    "glibc-include/netpacket/packet.h"
    "glibc-include/netrom/netrom.h"
    "glibc-include/netrose/rose.h"
    "glibc-include/nfs/nfs.h"
    "glibc-include/nl_types.h"
    "glibc-include/nss.h"
    "glibc-include/obstack.h"
    "glibc-include/paths.h"
    "glibc-include/poll.h"
    "glibc-include/printf.h"
    "glibc-include/proc_service.h"
    "glibc-include/protocols/routed.h"
    "glibc-include/protocols/rwhod.h"
    "glibc-include/protocols/talkd.h"
    "glibc-include/protocols/timed.h"
    "glibc-include/pthread.h"
    "glibc-include/pty.h"
    "glibc-include/pwd.h"
    "glibc-include/re_comp.h"
    "glibc-include/regex.h"
    "glibc-include/regexp.h"
    "glibc-include/resolv.h"
    "glibc-include/rpc/netdb.h"
    "glibc-include/sched.h"
    "glibc-include/scsi/scsi.h"
    "glibc-include/scsi/scsi_ioctl.h"
    "glibc-include/scsi/sg.h"
    "glibc-include/search.h"
    "glibc-include/semaphore.h"
    "glibc-include/setjmp.h"
    "glibc-include/sgtty.h"
    "glibc-include/shadow.h"
    "glibc-include/signal.h"
    "glibc-include/spawn.h"
    "glibc-include/stab.h"
    "glibc-include/stdc-predef.h"
    "glibc-include/stdint.h"
    "glibc-include/stdio.h"
    "glibc-include/stdio_ext.h"
    "glibc-include/stdlib.h"
    "glibc-include/string.h"
    "glibc-include/strings.h"
    "glibc-include/stropts.h"
    "glibc-include/sys/acct.h"
    "glibc-include/sys/auxv.h"
    "glibc-include/sys/bitypes.h"
    "glibc-include/sys/cdefs.h"
    "glibc-include/sys/debugreg.h"
    "glibc-include/sys/dir.h"
    "glibc-include/sys/elf.h"
    "glibc-include/sys/epoll.h"
    "glibc-include/sys/errno.h"
    "glibc-include/sys/eventfd.h"
    "glibc-include/sys/fanotify.h"
    "glibc-include/sys/fcntl.h"
    "glibc-include/sys/file.h"
    "glibc-include/sys/fsuid.h"
    "glibc-include/sys/gmon.h"
    "glibc-include/sys/gmon_out.h"
    "glibc-include/sys/inotify.h"
    "glibc-include/sys/io.h"
    "glibc-include/sys/ioctl.h"
    "glibc-include/sys/ipc.h"
    "glibc-include/sys/kd.h"
    "glibc-include/sys/klog.h"
    "glibc-include/sys/mman.h"
    "glibc-include/sys/mount.h"
    "glibc-include/sys/msg.h"
    "glibc-include/sys/mtio.h"
    "glibc-include/sys/param.h"
    "glibc-include/sys/pci.h"
    "glibc-include/sys/perm.h"
    "glibc-include/sys/personality.h"
    "glibc-include/sys/poll.h"
    "glibc-include/sys/prctl.h"
    "glibc-include/sys/procfs.h"
    "glibc-include/sys/profil.h"
    "glibc-include/sys/ptrace.h"
    "glibc-include/sys/queue.h"
    "glibc-include/sys/quota.h"
    "glibc-include/sys/random.h"
    "glibc-include/sys/raw.h"
    "glibc-include/sys/reboot.h"
    "glibc-include/sys/reg.h"
    "glibc-include/sys/resource.h"
    "glibc-include/sys/select.h"
    "glibc-include/sys/sem.h"
    "glibc-include/sys/sendfile.h"
    "glibc-include/sys/shm.h"
    "glibc-include/sys/signal.h"
    "glibc-include/sys/signalfd.h"
    "glibc-include/sys/socket.h"
    "glibc-include/sys/socketvar.h"
    "glibc-include/sys/soundcard.h"
    "glibc-include/sys/stat.h"
    "glibc-include/sys/statfs.h"
    "glibc-include/sys/statvfs.h"
    "glibc-include/sys/stropts.h"
    "glibc-include/sys/swap.h"
    "glibc-include/sys/syscall.h"
    "glibc-include/sys/sysctl.h"
    "glibc-include/sys/sysinfo.h"
    "glibc-include/sys/syslog.h"
    "glibc-include/sys/sysmacros.h"
    "glibc-include/sys/termios.h"
    "glibc-include/sys/time.h"
    "glibc-include/sys/timeb.h"
    "glibc-include/sys/timerfd.h"
    "glibc-include/sys/times.h"
    "glibc-include/sys/timex.h"
    "glibc-include/sys/ttychars.h"
    "glibc-include/sys/ttydefaults.h"
    "glibc-include/sys/types.h"
    "glibc-include/sys/ucontext.h"
    "glibc-include/sys/uio.h"
    "glibc-include/sys/un.h"
    "glibc-include/sys/unistd.h"
    "glibc-include/sys/user.h"
    "glibc-include/sys/utsname.h"
    "glibc-include/sys/vfs.h"
    "glibc-include/sys/vlimit.h"
    "glibc-include/sys/vm86.h"
    "glibc-include/sys/vt.h"
    "glibc-include/sys/vtimes.h"
    "glibc-include/sys/wait.h"
    "glibc-include/sys/xattr.h"
    "glibc-include/syscall.h"
    "glibc-include/sysexits.h"
    "glibc-include/syslog.h"
    "glibc-include/tar.h"
    "glibc-include/termio.h"
    "glibc-include/termios.h"
    "glibc-include/tgmath.h"
    "glibc-include/thread_db.h"
    "glibc-include/threads.h"
    "glibc-include/time.h"
    "glibc-include/ttyent.h"
    "glibc-include/uchar.h"
    "glibc-include/ucontext.h"
    "glibc-include/ulimit.h"
    "glibc-include/unistd.h"
    "glibc-include/utime.h"
    "glibc-include/utmp.h"
    "glibc-include/utmpx.h"
    "glibc-include/values.h"
    "glibc-include/wait.h"
    "glibc-include/wchar.h"
    "glibc-include/wctype.h"
    "glibc-include/wordexp.h"
    "glibc/bits/byteswap.h"
    "glibc/bits/endian.h"
    "glibc/bits/floatn-common.h"
    "glibc/bits/libc-header-start.h"
    "glibc/bits/long-double.h"
    "glibc/bits/stdint-intn.h"
    "glibc/bits/timesize.h"
    "glibc/bits/typesizes.h"
    "glibc/bits/time64.h"
    "glibc/bits/uintn-identity.h"
    "glibc/bits/waitflags.h"
    "glibc/bits/waitstatus.h"
    "glibc/bits/select.h"
    "glibc/bits/pthreadtypes.h"
    "glibc/bits/types/__sigset_t.h"
    "glibc/bits/types/struct_sched_param.h"
    "glibc/bits/stdlib-bsearch.h"
    "glibc/bits/stat.h"
    "glibc/bits/sched.h"
    "glibc/bits/time.h"
    "glibc/csu/abi-note.S"
    "glibc/csu/abi-tag.h"
    "glibc/csu/elf-init.c"
    "glibc/csu/init.c"
    "glibc/debug/stack_chk_fail_local.c"
    "glibc/include/alloca.h"
    "glibc/include/bits/types.h"
    "glibc/include/bits/types/__locale_t.h"
    "glibc/include/bits/types/clock_t.h"
    "glibc/include/bits/types/time_t.h"
    "glibc/include/bits/types/timer_t.h"
    "glibc/include/bits/types/clockid_t.h"
    "glibc/include/bits/types/locale_t.h"
    "glibc/include/bits/types/sigset_t.h"
    "glibc/include/bits/types/struct_timeval.h"
    "glibc/include/bits/types/struct_timespec.h"
    "glibc/include/bits/stdlib-float.h"
    "glibc/include/bits/statx.h"
    "glibc/include/bits/cpu-set.h"
    "glibc/include/config.h"
    "glibc/include/elf.h"
    "glibc/include/endian.h"
    "glibc/include/features.h"
    "glibc/include/gnu/stubs.h"
    "glibc/include/libc-modules.h"
    "glibc/include/libc-symbols.h"
    "glibc/include/stdc-predef.h"
    "glibc/include/stdlib.h"
    "glibc/include/sys/cdefs.h"
    "glibc/include/sys/types.h"
    "glibc/include/sys/select.h"
    "glibc/include/sys/stat.h"
    "glibc/include/stackinfo.h"
    "glibc/include/libc-pointer-arith.h"
    "glibc/include/dso_handle.h"
    "glibc/include/pthread.h"
    "glibc/include/sched.h"
    "glibc/include/time.h"
    "glibc/include/sys/time.h"
    "glibc/io/fstat.c"
    "glibc/io/fstat64.c"
    "glibc/io/fstatat.c"
    "glibc/io/fstatat64.c"
    "glibc/io/lstat.c"
    "glibc/io/lstat64.c"
    "glibc/io/mknod.c"
    "glibc/io/mknodat.c"
    "glibc/io/stat.c"
    "glibc/io/stat64.c"
    "glibc/io/sys/stat.h"
    "glibc/io/bits/statx.h"
    "glibc/locale/bits/types/__locale_t.h"
    "glibc/locale/bits/types/locale_t.h"
    "glibc/misc/sys/cdefs.h"
    "glibc/misc/sys/select.h"
    "glibc/nptl/pthread_atfork.c"
    "glibc/posix/bits/types.h"
    "glibc/posix/sys/types.h"
    "glibc/posix/sched.h"
    "glibc/posix/bits/cpu-set.h"
    "glibc/stdlib/at_quick_exit.c"
    "glibc/stdlib/atexit.c"
    "glibc/stdlib/exit.h"
    "glibc/stdlib/stdlib.h"
    "glibc/stdlib/bits/stdlib-float.h"
    "glibc/sysdeps/generic/dwarf2.h"
    "glibc/sysdeps/generic/symbol-hacks.h"
    "glibc/sysdeps/generic/sysdep.h"
    "glibc/sysdeps/generic/stackinfo.h"
    "glibc/sysdeps/generic/dl-dtprocnum.h"
    "glibc/sysdeps/generic/allocalim.h"
    "glibc/sysdeps/generic/libc-lock.h"
    "glibc/sysdeps/pthread/allocalim.h"
    "glibc/sysdeps/nptl/bits/pthreadtypes.h"
    "glibc/sysdeps/nptl/bits/thread-shared-types.h"
    "glibc/sysdeps/nptl/libc-lock.h"
    "glibc/sysdeps/nptl/pthread.h"
    "glibc/sysdeps/unix/sysv/linux/x86/bits/typesizes.h"
    "glibc/sysdeps/unix/sysv/linux/x86/sys/elf.h"
    "glibc/sysdeps/unix/sysv/linux/bits/sched.h"
    "glibc/sysdeps/unix/sysv/linux/bits/time.h"
    "glibc/sysdeps/unix/sysv/linux/include/sys/timex.h"
    "glibc/sysdeps/unix/sysv/linux/sys/timex.h"
    "glibc/sysdeps/unix/sysv/linux/bits/timex.h"
    "glibc/sysdeps/x86/bits/floatn.h"
    "glibc/sysdeps/x86/bits/wordsize.h"
    "glibc/sysdeps/x86/bits/endian.h"
    "glibc/sysdeps/x86/bits/select.h"
    "glibc/sysdeps/x86/sysdep.h"
    "glibc/sysdeps/x86/nptl/bits/pthreadtypes-arch.h"
    "glibc/sysdeps/x86_64/crti.S"
    "glibc/sysdeps/x86_64/crtn.S"
    "glibc/sysdeps/x86_64/start.S"
    "glibc/sysdeps/x86_64/sysdep.h"
    "glibc/sysdeps/x86_64/stackinfo.h"
    "glibc/time/bits/types/clock_t.h"
    "glibc/time/bits/types/clockid_t.h"
    "glibc/time/bits/types/time_t.h"
    "glibc/time/bits/types/timer_t.h"
    "glibc/time/bits/types/struct_timeval.h"
    "glibc/time/bits/types/struct_timespec.h"
    "glibc/time/time.h"
    "glibc/time/sys/time.h"
    "glibc/string/endian.h"
    "glibc/signal/bits/types/sigset_t.h"
    "glibc/stdlib/alloca.h"
    "glibc/elf/elf.h"
    "glibc/include/bits/types/struct_tm.h"
    "glibc/time/bits/types/struct_tm.h"
    "glibc/include/bits/types/struct_itimerspec.h"
    "glibc/time/bits/types/struct_itimerspec.h"
    "glibc/sysdeps/x86/bits/setjmp.h"
    "glibc/include/setjmp.h"
    "glibc/setjmp/setjmp.h"
    "glibc/setjmp/setjmp.h"
    "glibc/bits/setjmp.h"
    "glibc/sysdeps/nptl/libc-lockP.h"
    "glibc/sysdeps/unix/sysv/linux/x86_64/lowlevellock.h"
    "glibc/sysdeps/nptl/lowlevellock.h"
    "glibc/include/stap-probe.h"
    "glibc/sysdeps/unix/sysv/linux/bits/param.h"
    "glibc/include/sys/param.h"
    "glibc/misc/sys/param.h"
    "glibc/bits/param.h"
    "glibc/include/signal.h"
    "glibc/include/sys/signal.h"
    "glibc/signal/signal.h"
    "glibc/signal/sys/signal.h"
    "glibc/sysdeps/unix/sysv/linux/bits/signum.h"
    "glibc/bits/signum.h"
    "glibc/bits/signum-generic.h"
    "glibc/include/bits/types/sig_atomic_t.h"
    "glibc/signal/bits/types/sig_atomic_t.h"
    "glibc/sysdeps/unix/sysv/linux/x86/bits/stat.h"
    "glibc/sysdeps/unix/sysv/linux/generic/bits/stat.h"
    "glibc/sysdeps/unix/sysv/linux/bits/stat.h"
    "symbols.zig"
)

if(MSVC)
    set(MSVC_DIA_SDK_DIR "$ENV{VSINSTALLDIR}DIA SDK")
    if (IS_DIRECTORY ${MSVC_DIA_SDK_DIR})
        set(ZIG_DIA_GUIDS_LIB "${MSVC_DIA_SDK_DIR}/lib/amd64/diaguids.lib")
        string(REGEX REPLACE "\\\\" "\\\\\\\\" ZIG_DIA_GUIDS_LIB_ESCAPED "${ZIG_DIA_GUIDS_LIB}")
    endif()
endif()

set(ZIG_LIB_DIR "lib/zig")
set(C_HEADERS_DEST "${ZIG_LIB_DIR}/include")
set(LIBC_FILES_DEST "${ZIG_LIB_DIR}/libc")
set(ZIG_STD_DEST "${ZIG_LIB_DIR}/std")
set(CONFIGURE_OUT_FILE "${CMAKE_BINARY_DIR}/config.h")
configure_file (
    "${CMAKE_SOURCE_DIR}/src/config.h.in"
    ${CONFIGURE_OUT_FILE}
)

include_directories(
    ${CMAKE_SOURCE_DIR}
    ${CMAKE_BINARY_DIR}
    "${CMAKE_SOURCE_DIR}/src"
)

# These have to go before the -Wno- flags
set(EXE_CFLAGS "-std=c++11")
if("${CMAKE_BUILD_TYPE}" STREQUAL "Debug")
    if(MSVC)
        set(EXE_CFLAGS "${EXE_CFLAGS} /w")
    elseif(MINGW)
        set(EXE_CFLAGS "${EXE_CFLAGS} -Wall -Werror -Wno-error=format= -Wno-error=format -Wno-error=format-extra-args")
    else()
        set(EXE_CFLAGS "${EXE_CFLAGS} -Werror -Wall")
    endif()
endif()

if(MSVC)
  set(EXE_CFLAGS "${EXE_CFLAGS}")
else()
  set(EXE_CFLAGS "${EXE_CFLAGS} -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS -D_GNU_SOURCE -fno-exceptions -fno-rtti  -Werror=strict-prototypes -Werror=old-style-definition -Werror=type-limits -Wno-missing-braces")
  if(MINGW)
      set(EXE_CFLAGS "${EXE_CFLAGS} -D__USE_MINGW_ANSI_STDIO -Wno-pedantic-ms-format")
  endif()
endif()

set(BLAKE_CFLAGS "-std=c99")

set(EXE_LDFLAGS " ")
if(MINGW)
    set(EXE_LDFLAGS "-static -static-libgcc -static-libstdc++")
elseif(MSVC)
    set(EXE_LDFLAGS "/STACK:16777216")
elseif(ZIG_STATIC)
    if(APPLE)
        set(EXE_LDFLAGS "-static-libgcc -static-libstdc++")
    else()
        set(EXE_LDFLAGS "-static")
    endif()
else()
    set(EXE_LDFLAGS " ")
endif()
if(ZIG_TEST_COVERAGE)
    set(EXE_CFLAGS "${EXE_CFLAGS} -fprofile-arcs -ftest-coverage")
    set(EXE_LDFLAGS "${EXE_LDFLAGS} -fprofile-arcs -ftest-coverage")
endif()

add_library(zig_cpp STATIC ${ZIG_CPP_SOURCES})
set_target_properties(zig_cpp PROPERTIES
    COMPILE_FLAGS ${EXE_CFLAGS}
)

add_library(embedded_blake STATIC ${BLAKE_SOURCES})
set_target_properties(embedded_blake PROPERTIES
    COMPILE_FLAGS "${BLAKE_CFLAGS} -O3"
)

add_executable(zig ${ZIG_SOURCES})
set_target_properties(zig PROPERTIES
    COMPILE_FLAGS ${EXE_CFLAGS}
    LINK_FLAGS ${EXE_LDFLAGS}
)

target_link_libraries(zig LINK_PUBLIC
    zig_cpp
    embedded_blake
    ${SOFTFLOAT_LIBRARIES}
    ${CLANG_LIBRARIES}
    ${LLD_LIBRARIES}
    ${LLVM_LIBRARIES}
    ${CMAKE_THREAD_LIBS_INIT}
)
if(NOT MSVC)
    target_link_libraries(zig LINK_PUBLIC ${LIBXML2})
endif()
if(ZIG_DIA_GUIDS_LIB)
    target_link_libraries(zig LINK_PUBLIC ${ZIG_DIA_GUIDS_LIB})
endif()

if(MSVC OR MINGW)
    target_link_libraries(zig LINK_PUBLIC version)
endif()
install(TARGETS zig DESTINATION bin)
install(TARGETS zig_cpp DESTINATION "${ZIG_CPP_LIB_DIR}")

foreach(file ${ZIG_C_HEADER_FILES})
    get_filename_component(file_dir "${C_HEADERS_DEST}/${file}" DIRECTORY)
    install(FILES "${CMAKE_SOURCE_DIR}/c_headers/${file}" DESTINATION "${file_dir}")
endforeach()

foreach(file ${ZIG_STD_FILES})
    get_filename_component(file_dir "${ZIG_STD_DEST}/${file}" DIRECTORY)
    install(FILES "${CMAKE_SOURCE_DIR}/std/${file}" DESTINATION "${file_dir}")
endforeach()

foreach(file ${ZIG_LIBC_FILES})
    get_filename_component(file_dir "${LIBC_FILES_DEST}/${file}" DIRECTORY)
    install(FILES "${CMAKE_SOURCE_DIR}/libc/${file}" DESTINATION "${file_dir}")
endforeach()


install(FILES "${CMAKE_SOURCE_DIR}/src-self-hosted/arg.zig" DESTINATION "${ZIG_STD_DEST}/special/fmt/")
install(FILES "${CMAKE_SOURCE_DIR}/src-self-hosted/main.zig" DESTINATION "${ZIG_STD_DEST}/special/fmt/")
install(FILES "${CMAKE_SOURCE_DIR}/src-self-hosted/errmsg.zig" DESTINATION "${ZIG_STD_DEST}/special/fmt/")
